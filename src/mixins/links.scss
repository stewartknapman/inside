@mixin links ($color, $color_hover: false) {
  a {
    color: $color;
    
    @if ($color_hover) {
      &:hover,
      &:active {
        color: $color_hover;
        /* 
          Arbitrary webkit-only property that forces a redraw
          Fixes currentColor bug
          see: http://stackoverflow.com/questions/36046185/how-to-hack-around-linear-gradient-with-currentcolor-bug-in-chrome
        */
        -webkit-margin-start: .1px;
      }
    }
    
    @if $include_pretty_underlines {
      @include pretty-underlines();
    }
  }
  
  a:focus {
    outline: none;
    color: $selection_color;
    background: rgba($selection_bg_color, 0.3);
    box-shadow: 0 0 0 0.2em rgba($selection_bg_color, 0.3);
    text-shadow: none;
  }
  figure > a:focus {
    outline-color: rgba($selection_bg_color, 0.3);
  }
  
  h1 a,
  h2 a,
  h3 a,
  h4 a,
  h5 a,
  h6 a {
    text-decoration: none;
    color: inherit;
    @if $include_pretty_underlines {
      background: none;
    }
  }
}

@mixin pretty-underlines () {
  text-decoration: none;
  background-image: linear-gradient( to right, currentColor 0%, currentColor 100% );
  background-repeat: repeat-x;
  background-position: 0 $underline_position;
  background-size: 100% $underline_weight;
}